"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){var e="plugin_collapsible",n=function(t,e){var n=this;n.element=t,n.parents=["trigger","wrap","content"],n.attributes=["open","indicatorParent","trigger","content"],n.defaults={debug:!1,trigger:".trigger",content:".content",eventSuffix:".collapsible-plugin",classPrefix:"collapsible-",triggerClass:"trigger",contentClass:"content",open:!1,openClass:"open",closeClass:"close",indicatorClass:"indicator",indicatorParent:!1,openText:"Show details",closeText:"Hide details",animated:!0,calcDelta:function(){return 0},activeToggle:!1},n.$element=void 0,n.$indicator=void 0,n.$content=void 0,n.$trigger=void 0,n._init(e)},i=t(window);n.prototype={_toggleLogging:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(this.settings.debug)if(t){for(var n=arguments.length,i=Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];console.group(["collapsible",e].join(" "),i)}else console.groupEnd()},_log:function(t){if(this.settings.debug){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];n.length?console.log(t,n):console.log(t)}},_checkViewport:function(){this._log("_checkViewport");var t=this,e=t.settings,n=t.$element.offset().top,o=e.calcDelta();return!!e.open&&(i.scrollTop()>n&&(i.scrollTop(n-o),t.$element.trigger("adjust-viewport",[e.open])),!0)},_setListener:function(){var t=this,e=t.settings;t._log("_setListener"),t.$trigger.on("click"+e.eventSuffix,function(e){t._toggleLogging(!0,"<$trigger:click>",e),e.preventDefault(),t.toggle(),t._checkViewport(),t._toggleLogging()})},_unsetListener:function(){this._log("_unsetListener");var t=this;t.$trigger.off("click"+t.settings.eventSuffix)},_checkIndicatorParent:function(){this._log("_checkIndicatorParent");var t=this,e=t.settings,n=void 0,i=void 0;if(!e.indicatorParent)return!1;for(n=0,i=t.parents.length;n<i;n+=1)if(t.parents[n]===e.indicatorParent)return!0;return!1},_createIndicator:function(){this._log("_createIndicator");var e=this,n=e.settings,i=void 0;if(!e._checkIndicatorParent())return!1;switch(e.$indicator=t("<span></span>").addClass(n.classPrefix+n.indicatorClass),n.indicatorParent){case"trigger":i=e.$trigger;break;case"content":i=e.$content;break;default:i=e.$element}return e.$indicator.appendTo(i),!0},_getJqueryElements:function(){this._log("_getJqueryElements");var t=this,e=t.settings,n=t.$element;"object"===_typeof(e.trigger)?t.$trigger=e.trigger:t.$trigger=n.find(e.trigger),"object"===_typeof(e.content)?t.$content=e.content:t.$content=n.find(e.content)},_create:function(){this._log("_create");var t=this,e=t.settings,n=t.$element;n.trigger("before-create",[t.settings.open]),t._getJqueryElements(),t.$trigger.addClass(e.classPrefix+e.triggerClass),t.$content.addClass(e.classPrefix+e.contentClass),t._createIndicator(),t._setListener(),n.trigger("create",[t.settings.open])},_toggleIndicator:function(t){this._log("_toggleIndicator",t);var e=this,n=e.settings,i=n.closeText;return t&&(i=n.openText),!!e.$indicator&&(e.$indicator.text(i).attr("title",i),t)},_toggleByStatus:function(t){this._log("_toggleByStatus",t);var e=this,n=e.settings;e.$element.toggleClass(n.classPrefix+n.openClass,t).toggleClass(n.classPrefix+n.closeClass,!t),e._toggleIndicator(t),n.animated&&(t?e.$content.slideDown():e.$content.slideUp()),n.activeToggle&&e.$content.toggle(t)},toggle:function(t,e){this._log("toggle",t,e);var n=this,i=n.settings,o=t;return"boolean"!=typeof t&&(o=!i.open),e||n.$element.trigger("before-toggle",[i.open,o]),n._toggleByStatus(o),i.open=o,e||n.$element.trigger("toggle",[i.open]),o},update:function(t){this._log("update",t);var e=this;return e.$element.trigger("before-update",[e.settings.open]),e.toggle(t),e.$element.trigger("update",[e.settings.open]),t},_importAttrConfig:function(){this._log("_importAttrConfig");var t=this,e=t.settings,n=t.$element.data("options"),i=void 0;if(!n)return!1;var o=!0,r=!1,s=void 0;try{for(var g,a=t.attributes[Symbol.iterator]();!(o=(g=a.next()).done);o=!0)i=g.value,n.hasOwnProperty(i)&&(e[i]=n[i])}catch(t){r=!0,s=t}finally{try{!o&&a.return&&a.return()}finally{if(r)throw s}}return t.settings},_init:function(e){var n=this,i=t.extend(n.defaults,e);n.$element=t(n.element),n.settings=i,n._toggleLogging(!0),n._log("_init",e),n._importAttrConfig(),n._create(),n.update(i.open),n.$element.trigger("init",[i.status]),n._toggleLogging()},destroy:function(){this._log("destroy");var t=this;t.$element.trigger("before-destroy",[status]),t.$indicator&&t.$indicator.remove(),t.toggle(!0),t._unsetListener(),t.$element.trigger("destroy",[status])},getStatus:function(){return this._log("getStatus"),this.settings.open}},t.fn.collapsible=function(i,o){return this.each(function(){var r=this;t.data(r,e)?n.prototype[i]&&"string"==typeof i&&"_"!==i.substr(0,1)&&t.data(r,e)[i](o):t.data(r,e,new n(r,i))})}}(jQuery);