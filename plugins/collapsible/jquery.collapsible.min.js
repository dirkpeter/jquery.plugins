"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){var e="plugin_collapsible",r=function(e,r){var n=this;n.element=e,n.parents=["trigger","wrap","content"],n.attributes=["open","indicatorParent","trigger","content"],n.defaults={debug:!1,trigger:".trigger",content:".content",eventSuffix:".collapsible-plugin",$trigger:t(),$content:t(),triggerClass:"trigger",contentClass:"content",open:!1,classPrefix:"collapsible-",openClass:"open",closeClass:"close",indicatorClass:"indicator",indicatorParent:!1,openText:"Show details",closeText:"Hide details",calcDelta:function(){return 0},activeToggle:!1},n._init(r)},n=t(window);r.prototype={_toggleLogging:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(this.settings.debug)if(t){for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];console.group(["collapsible",e].join(" "),n)}else console.groupEnd()},_log:function(t){if(this.settings.debug){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];r.length?console.log(t,r):console.log(t)}},_checkViewport:function(){this._log("_checkViewport");var t,e,r=this,i=r.settings;return!!i.open&&(t=r.$wrap.offset().top,e=i.calcDelta(),n.scrollTop()>t&&(n.scrollTop(t-e),r.$wrap.trigger("adjust-viewport",[i.open])),!0)},_setListener:function(){var t=this,e=t.settings;t._log("_setListener"),e.$trigger.on("click"+e.eventSuffix,function(e){t._toggleLogging(!0,"<trigger-click>",e),e.preventDefault(),t.toggle(),t._checkViewport(),t._toggleLogging()})},_unsetListener:function(){this._log("_unsetListener");var t=this.settings;t.$trigger.off("click"+t.eventSuffix)},_checkIndicatorParent:function(){this._log("_checkIndicatorParent");var t=this,e=t.settings;if(!e.indicatorParent)return!1;for(var r=0,n=t.parents.length;r<n;r+=1)if(t.parents[r]===e.indicatorParent)return!0;return!1},_createIndicator:function(){this._log("_createIndicator");var e,r=this,n=r.settings;if(!r._checkIndicatorParent())return!1;switch(n.$indicator=t("<span></span>").addClass(n.classPrefix+n.indicatorClass),n.indicatorParent){case"trigger":e=n.$trigger;break;case"content":e=n.$content;break;default:e=r.$wrap}return n.$indicator.appendTo(e),!0},_getJqueryElements:function(){this._log("_getJqueryElements");var t=this,e=t.settings,r=t.$wrap;"object"===_typeof(e.trigger)?e.$trigger=e.trigger:e.$trigger=r.find(e.trigger),"object"===_typeof(e.content)?e.$content=e.content:e.$content=r.find(e.content)},_create:function(){this._log("_create");var t=this,e=t.settings,r=t.$wrap;r.trigger("before-create",[t.settings.open]),t._getJqueryElements(),e.$trigger.addClass(e.classPrefix+e.triggerClass),e.$content.addClass(e.classPrefix+e.contentClass),t._createIndicator(),t._setListener(),r.trigger("create",[t.settings.open])},_toggleIndicator:function(t){this._log("_toggleIndicator",t);var e=this,r=e.settings,n=r.closeText;return t&&(n=r.openText),!!r.$indicator&&(r.$indicator.text(n).attr("title",n),t)},_toggleByStatus:function(t){this._log("_toggleStausClass",t);var e=this,r=e.settings;e.$wrap.toggleClass(r.classPrefix+r.openClass,t).toggleClass(r.classPrefix+r.closeClass,!t),e._toggleIndicator(t),r.activeToggle&&r.$content.toggle(t)},toggle:function(t,e){this._log("toggle",t,e);var r=this,n=r.settings,i=t;return"boolean"!=typeof t&&(i=!n.open),e||r.$wrap.trigger("before-toggle",[n.open,i]),r._toggleByStatus(i),n.open=i,e||r.$wrap.trigger("toggle",[n.open]),i},update:function(t){var e=this;return e._log("update",t),e.$wrap.trigger("before-update",[e.settings.open]),e.toggle(t),e.$wrap.trigger("update",[e.settings.open]),t},_importAttrConfig:function(){this._log("_importAttrConfig");var t=this,e=t.settings,r=t.$wrap.data("options");if(!r)return!1;var n=!0,i=!1,o=void 0;try{for(var s,g=t.attributes[Symbol.iterator]();!(n=(s=g.next()).done);n=!0){var a=s.value;Reflect.getOwnPropertyDescriptor(r,a)&&(e[a]=r[a])}}catch(t){i=!0,o=t}finally{try{!n&&g.return&&g.return()}finally{if(i)throw o}}return t.settings},_init:function(e){var r=this;r.$wrap=t(r.element),r.settings=t.extend(r.defaults,e),r._toggleLogging(!0),r._log("_init",e),r._importAttrConfig(),r._create(),r.update(r.settings.open),r.$wrap.trigger("init",[r.settings.status]),r._toggleLogging()},destroy:function(){this._log("destroy");var t=this,e=t.settings;t.$wrap.trigger("before-destroy",[status]),e.$indicator&&e.$indicator.remove(),t.toggle(!0),t._unsetListener(),t.$wrap.trigger("destroy",[status])},getStatus:function(){return this._log("getStatus"),this.settings.open}},t.fn.collapsible=function(n,i){return this.each(function(){var o=this;t.data(o,e)?r.prototype[n]&&"string"==typeof n&&"_"!==n.substr(0,1)&&t.data(o,e)[n](i):t.data(o,e,new r(o,n))})}}(jQuery);