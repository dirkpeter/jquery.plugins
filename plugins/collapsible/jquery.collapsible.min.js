"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){var e="plugin_collapsible",n=function(e,n){var o=this;o.element=e,o.parents=["trigger","wrap","content"],o.attributes=["open","indicatorParent","trigger","content"],o.defaults={debug:!1,trigger:".trigger",content:".content",eventSuffix:".collapsible-plugin",$trigger:t(),$content:t(),triggerClass:"trigger",contentClass:"content",open:!1,classPrefix:"collapsible-",openClass:"open",closeClass:"close",indicatorClass:"indicator",indicatorParent:!1,openText:"Show details",closeText:"Hide details",calcDelta:function(){return 0},activeToggle:!1},o.$element=void 0,o._init(n)},o=t(window);n.prototype={_toggleLogging:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(this.settings.debug)if(t){for(var n=arguments.length,o=Array(n>2?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];console.group(["collapsible",e].join(" "),o)}else console.groupEnd()},_log:function(t){if(this.settings.debug){for(var e=arguments.length,n=Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];n.length?console.log(t,n):console.log(t)}},_checkViewport:function(){this._log("_checkViewport");var t=this,e=t.settings,n=t.$element.offset().top,r=e.calcDelta();return!!e.open&&(o.scrollTop()>n&&(o.scrollTop(n-r),t.$element.trigger("adjust-viewport",[e.open])),!0)},_setListener:function(){var t=this,e=t.settings;t._log("_setListener"),e.$trigger.on("click"+e.eventSuffix,function(e){t._toggleLogging(!0,"<$trigger:click>",e),e.preventDefault(),t.toggle(),t._checkViewport(),t._toggleLogging()})},_unsetListener:function(){this._log("_unsetListener");var t=this.settings;t.$trigger.off("click"+t.eventSuffix)},_checkIndicatorParent:function(){this._log("_checkIndicatorParent");var t=this,e=t.settings,n=void 0,o=void 0;if(!e.indicatorParent)return!1;for(n=0,o=t.parents.length;n<o;n+=1)if(t.parents[n]===e.indicatorParent)return!0;return!1},_createIndicator:function(){this._log("_createIndicator");var e=this,n=e.settings,o=void 0;if(!e._checkIndicatorParent())return!1;switch(n.$indicator=t("<span></span>").addClass(n.classPrefix+n.indicatorClass),n.indicatorParent){case"trigger":o=n.$trigger;break;case"content":o=n.$content;break;default:o=e.$element}return n.$indicator.appendTo(o),!0},_getJqueryElements:function(){this._log("_getJqueryElements");var t=this,e=t.settings,n=t.$element;"object"===_typeof(e.trigger)?e.$trigger=e.trigger:e.$trigger=n.find(e.trigger),"object"===_typeof(e.content)?e.$content=e.content:e.$content=n.find(e.content)},_create:function(){this._log("_create");var t=this,e=t.settings,n=t.$element;n.trigger("before-create",[t.settings.open]),t._getJqueryElements(),e.$trigger.addClass(e.classPrefix+e.triggerClass),e.$content.addClass(e.classPrefix+e.contentClass),t._createIndicator(),t._setListener(),n.trigger("create",[t.settings.open])},_toggleIndicator:function(t){this._log("_toggleIndicator",t);var e=this,n=e.settings,o=n.closeText;return t&&(o=n.openText),!!n.$indicator&&(n.$indicator.text(o).attr("title",o),t)},_toggleByStatus:function(t){this._log("_toggleStausClass",t);var e=this,n=e.settings;e.$element.toggleClass(n.classPrefix+n.openClass,t).toggleClass(n.classPrefix+n.closeClass,!t),e._toggleIndicator(t),n.activeToggle&&n.$content.toggle(t)},toggle:function(t,e){this._log("toggle",t,e);var n=this,o=n.settings,r=t;return"boolean"!=typeof t&&(r=!o.open),e||n.$element.trigger("before-toggle",[o.open,r]),n._toggleByStatus(r),o.open=r,e||n.$element.trigger("toggle",[o.open]),r},update:function(t){var e=this;return e._log("update",t),e.$element.trigger("before-update",[e.settings.open]),e.toggle(t),e.$element.trigger("update",[e.settings.open]),t},_importAttrConfig:function(){this._log("_importAttrConfig");var t=this,e=t.settings,n=t.$element.data("options"),o=void 0;if(!n)return!1;var r=!0,i=!1,s=void 0;try{for(var g,a=t.attributes[Symbol.iterator]();!(r=(g=a.next()).done);r=!0)o=g.value,Reflect.getOwnPropertyDescriptor(n,o)&&(e[o]=n[o])}catch(t){i=!0,s=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw s}}return t.settings},_init:function(e){var n=this,o=t.extend(n.defaults,e);n.$element=t(n.element),n.settings=o,n._toggleLogging(!0),n._log("_init",e),n._importAttrConfig(),n._create(),n.update(o.open),n.$element.trigger("init",[o.status]),n._toggleLogging()},destroy:function(){this._log("destroy");var t=this,e=t.settings;t.$element.trigger("before-destroy",[status]),e.$indicator&&e.$indicator.remove(),t.toggle(!0),t._unsetListener(),t.$element.trigger("destroy",[status])},getStatus:function(){return this._log("getStatus"),this.settings.open}},t.fn.collapsible=function(o,r){return this.each(function(){var i=this;t.data(i,e)?n.prototype[o]&&"string"==typeof o&&"_"!==o.substr(0,1)&&t.data(i,e)[o](r):t.data(i,e,new n(i,o))})}}(jQuery);