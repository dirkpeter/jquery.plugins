"use strict";!function(t){var e="plugin_accordion",n=function(e,n){this.element=e,this.attributes=["current","trigger","content"],this.defaults={debug:!1,debugCollapsibles:!1,elements:t(),classPrefix:"accordion-",eventSuffix:".accordion-plugin",elementsClass:"element",trigger:".trigger",content:".content",triggerClass:"trigger",contentClass:"content",toggleListener:!0,multiple:!1,calcDelta:function(){return 0},current:0},this._init(n)};n.prototype={_toggleLogging:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(this.settings.debug)if(t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];console.group(["accordion",e].join(" "),r)}else console.groupEnd()},_log:function(t){if(this.settings.debug===!0){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n.length?console.log(t,n):console.log(t)}},_setCurrent:function(t,e,n){this._log("_setCurrent",t,e,n);var r=this,i=r.settings,o=i.elementsCache;return!(parseInt(t,10)<0||!n&&i.current===t)&&((e||"boolean"!=typeof e)&&o[t].toggle(!0,!0),i.multiple!==!0&&o.forEach(function(e,n){n!==t&&e.toggle(!1,!0)}),i.current=t,r.$wrap.trigger("set-current",[t]),t)},_setCollapsibleListener:function(){this._log("_setCollapsibleListener");var e=this;e.$elements.on("toggle"+e.settings.eventSuffix,function(n,r){e._toggleLogging(!0,"<element-toggle>",n,r),r&&e.goto(t(n.currentTarget).index(),!0,!1),e._toggleLogging()})},_cacheElementsById:function(){this._log("_cacheElementsById");var e=this,n=[];e.$elements.each(function(e,r){n.push(t(r).data("plugin_collapsible"))}),e.settings.elementsCache=n},_create:function(){this._log("_create");var t=this,e=t.settings;t.$elements.collapsible({trigger:e.trigger,content:e.content,calcDelta:e.calcDelta,open:!1,debug:e.debugCollapsibles}),t._cacheElementsById(),t.elementCount=e.elementsCache.length,e.toggleListener&&t._setCollapsibleListener()},goto:function(t,e){this._log("goto",t,e);var n=this,r=t;return e||(r=parseInt(t,10)-1),r<0||r>=n.elementCount?(n._log("index exceeds range ("+r+"/"+n.elementCount+")"),!1):(n._setCurrent(r,!0,!0),r)},update:function(){this._log("update");var t=this;t.goto(t.settings.current,!0)},_importAttrConfig:function(){this._log("_importAttrConfig");var t=this,e=t.settings,n=t.$wrap.data("options");if(!n)return!1;var r=!0,i=!1,o=void 0;try{for(var s,g=t.attributes[Symbol.iterator]();!(r=(s=g.next()).done);r=!0){var l=s.value;Reflect.getOwnPropertyDescriptor(n,l)&&(e[l]=n[l])}}catch(t){i=!0,o=t}finally{try{!r&&g.return&&g.return()}finally{if(i)throw o}}return t.settings},_init:function(e){var n=this;n.$wrap=t(n.element),n.settings=t.extend(n.defaults,e),n._toggleLogging(!0),n._log("_init",e),n._importAttrConfig(),n.$elements=n.$wrap.find(n.settings.elements),n._create(),n.update(),n.$wrap.trigger("init",[n.settings.status]),n._toggleLogging()},destroy:function(){this._log("destroy")},getCurrent:function(){return this._log("getCurrent"),this.settings.current}},t.fn.accordion=function(r,i){return this.each(function(){var o=this;t.data(o,e)?n.prototype[r]&&"string"==typeof r&&"_"!==r.substr(0,1)&&t.data(o,e)[r](i):t.data(o,e,new n(o,r))})}}(jQuery);