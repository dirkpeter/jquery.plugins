"use strict";!function(t){var e="scrollSpy",i="plugin_"+e,a=function(i,a){var n=this;n.element=i,n.attributes=["offset","sections"],n.defaults={debug:!1,sectionsSelector:["section","[data-nav-item]"],titleSelector:"h1, h2",navID:e.toLowerCase(),navAttach:"body",baseClass:e.toLowerCase(),currentClass:"current",delta:0,dataNavAttr:"nav",eventSuffix:"."+e+"-plugin",hideOnMobile:!0,itemDataAttr:"nav-item",mobileMaxWidth:990,navSectionClassPrefix:"nav-section--",scrollDuration:500,timer:void 0,timerDelay:100},n.timer=void 0,n.winWidth=void 0,n.winHeight=void 0,n.$element=void 0,n.$attach=void 0,n.$sections=t(),n.$list=void 0,n._init(a)},n=t(window);a.prototype={_log:function(t){if(!0===this.settings.debug){for(var i=arguments.length,a=Array(i>1?i-1:0),n=1;n<i;n++)a[n-1]=arguments[n];console.log("["+e+":"+t+"]",a)}},_setCurrent:function(){this._log("_setCurrent");var e=this,i=e.settings,a=Math.round(t(window).scrollTop()-e.winHeight/100*50);return e.$items.removeClass(i.currentClass),e.$sections.each(function(e,n){var s=t(n);a<s.offset&&s.$nav.addClass(i.currentClass)}),!0},update:function(){this._log("update");var t=this,e=t.settings;t.winHeight=Math.ceil(n.height()),t.winWidth=Math.floor(n.width());var i=!0,a=!1,s=void 0;try{for(var o,r=e.sections[Symbol.iterator]();!(i=(o=r.next()).done);i=!0){var l=o.value;l.offset=Math.floor(l.$el.offset().top)}}catch(t){a=!0,s=t}finally{try{!i&&r.return&&r.return()}finally{if(a)throw s}}t.$nav.toggle(e.hideOnMobile&&t.winWidth>e.mobileMaxWidth),t._setCurrent(),t.$element.trigger("update")},_collectSections:function(){this._log("_collectSections");var e=this,i=e.settings,a=t();t(i.sectionsSelector.join(", ")).each(function(e,n){var s=t(n),o={$el:s,title:void 0,$nav:void 0},r=s.data(i.itemDataAttr);o.title=r||s.find(i.titleSelector).text(),void 0!==o.title&&!1!==r&&(s.addClass(i.navSectionClassPrefix+o.title.toLowerCase().replace(" ","-")),o.title&&(s.data(o),a=a.add(s)))}),e.$sections=a},_scrollToSection:function(e){this._log("_scrollToSection");var i=this.settings,a=Math.floor(e.$el.offset().top),n=a-i.delta-parseInt(e.$el.css("margin-top"),10);e.offset=a,t("html, body").animate({scrollTop:n},i.scrollDuration,"swing")},_setListener:function(){this._log("_setListener");var i=this,a=i.settings;i.$items.on("click."+e,function(e){e.preventDefault(),i._scrollToSection(t(e.currentTarget).data(a.itemDataAttr))}),n.on("scroll."+e,function(){(!a.hideOnMobile||i.winWidth>a.mobileMaxWidth)&&i._setCurrent()}),n.on("resize."+e,function(){clearTimeout(i.timer),i.timer=setTimeout(i.update,a.timerDelay)})},_createMarkup:function(){this._log("_createMarkup");var e=this,i=e.settings,a=t();e.$nav=t("<nav>",{id:i.navID,class:i.baseClass+"--wrap"}),e.$list=t('<ul class="'+i.baseClass+'--list" />').appendTo(e.$nav),e.$sections.each(function(n,s){var o=t(s),r=o.data(),l=t('<li class="'+i.baseClass+'--list-item"><span>'+r.title+"</span></li>").data(i.itemDataAttr,o).appendTo(e.$list);o.data("$nav",l),a=a.add(l)}),e.$nav.appendTo(e.$attach),e.$items=a},create:function(){this._log("create");var e=this;e.$attach=t(e.settings.navAttach),e._collectSections(),e._createMarkup(),e._setListener(),e.$element.trigger("create")},_importAttrConfig:function(){this._log("_importAttrConfig");var t=this,e=t.settings,i=t.$element.data(),a=!0,n=!1,s=void 0;try{for(var o,r=t.attributes[Symbol.iterator]();!(a=(o=r.next()).done);a=!0){var l=o.value;if(i.hasOwnProperty(l))switch(l){case"center":e[l]={lat:i[l][0],lng:i[l][1]};break;default:e[l]=i[l]}}}catch(t){n=!0,s=t}finally{try{!a&&r.return&&r.return()}finally{if(n)throw s}}return t.settings},_init:function(e){var i=this,a=t.extend(i.defaults,e);i.$element=t(i.element),i.settings=a,i._importAttrConfig(),i.create(),i.update(),i.$element.trigger("init")}},t.fn[e]=function(e,n){return this.each(function(){var s=this;t.data(s,i)?a.prototype[e]&&"string"==typeof e&&"_"!==e.substr(0,1)&&t.data(s,i)[e](n):t.data(s,i,new a(s,e))})}}(jQuery);